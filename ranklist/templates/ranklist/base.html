{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ISSUES</title>

    <!-- Bootstrap -->
    <link href="{% static 'library/bootstrap/3.3.1/css/bootstrap-issues.css' %}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>


<nav class="navbar navbar-default navbar-inverse">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">ISSUES</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li {% block hours_active %}{% endblock %}><a href="{% url 'ranklist:hours' %}">Hours</a></li>
                <li {% block days_active %}{% endblock %}><a href="{% url 'ranklist:days' %}">Days</a></li>
                <li {% block months_active %}{% endblock %}><a href="{% url 'ranklist:months' %}">Months</a></li>
                <li {% block years_active %}{% endblock %}><a href="{% url 'ranklist:years' %}">Years</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div class="container">
    <div class="row">
        <div class="col-xs-3 col-md-3 bg-info">{% block sideContainer %}<button id="clickBtn" type="button" class="btn btn-success">click</button>{% endblock %}</div>
        <div class="col-xs-9 col-md-9 bg-success">
            <div id="contents">
                {% block contents %}

                {% endblock %}
            </div>
        </div>
    </div>
</div>


<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="{% static 'library/jquery/1.11.1/jquery.min.js' %}"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="{% static 'library/bootstrap/3.3.1/js/bootstrap.min.js' %}"></script>
</body>
</html>
<style>
    .bullet { font: 10px sans-serif; }
    .bullet .marker { stroke: #000; stroke-width: 2px; }
    .bullet .tick line { stroke: #666; stroke-width: .5px; }
    .bullet .range.s0 { fill: #eee; }
    .bullet .range.s1 { fill: #ddd; }
    .bullet .range.s2 { fill: #ccc; }
    .bullet .measure.s0 { fill: lightsteelblue; }
    .bullet .measure.s1 { fill: steelblue; }
    .bullet .title { font-size: 14px; font-weight: bold; }
    .bullet .subtitle { fill: #999; }
</style>
<script src="{% static 'library/d3/3.5.3/d3.v3.min.js' %}"></script>
<script src="{% static 'ranklist/js/bullets/bullet.js' %}"></script>
<script>
    $('#clickBtn').click(function(){
        var margin = {top: 5, right: 15, bottom: 20, left: 115},
                {#width = 960 - margin.left - margin.right,#}
                width = $('#contents').empty().width() - margin.left - margin.right,
                height = 50 - margin.top - margin.bottom;

        var chart = d3.bullet()
                .width(width)
                .height(height);

        d3.json("{% static 'ranklist/js/bullets/bullets.json' %}", function(error, data) {
            var svg = d3.select("#contents").selectAll("svg")
                    .data(data)
                    .enter().append("svg")
                    .attr("class", "bullet")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                    .call(chart);

            var title = svg.append("g")
                    .style("text-anchor", "end")
                    .attr("transform", "translate(-6," + height / 2 + ")");

            title.append("text")
                    .attr("class", "title")
                    .text(function(d) { return d.title; });

            title.append("text")
                    .attr("class", "subtitle")
                    .attr("dy", "1em")
                    .text(function(d) { return d.subtitle; });
        });
    })
</script>